rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    /**
     * @description Checks if the request is made by the owner of the user document.
     * @param {string} userId The user ID to compare against the request's authentication UID.
     * @returns {boolean} True if the user is signed in and the UID matches the userId, false otherwise.
     */
    function isOwner(userId) {
      return request.auth != null && request.auth.uid == userId;
    }

    /**
     * @description Checks if a user is signed in.
     * @returns {boolean} True if the user is signed in, false otherwise.
     */
    function isSignedIn() {
      return request.auth != null;
    }

    /**
     * @description Rules for user documents.
     * @path /users/{userId}
     */
    match /users/{userId} {
      allow get: if isOwner(userId);
      allow list: if false;
      allow create: if isSignedIn() && request.auth.uid == userId;
      allow update: if isOwner(userId);
      allow delete: if isOwner(userId);
    }

    /**
     * @description Rules for KPI documents.
     * @path /kpi/{kpiId}
     */
    match /kpi/{kpiId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Rules for announcement documents.
     * @path /announcements/{announcementId}
     */
    match /announcements/{announcementId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Rules for production status documents.
     * @path /productionStatus/{statusId}
     */
    match /productionStatus/{statusId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Rules for payment request documents.
     * @path /paymentRequests/{requestId}
     */
    match /paymentRequests/{requestId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Rules for budget documents.
     * @path /budgets/{budgetId}
     */
    match /budgets/{budgetId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Rules for leave request documents.
     * @path /leaveRequests/{requestId}
     */
    match /leaveRequests/{requestId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Rules for user permissions documents.
     * @path /userPermissions/{userId}
     */
    match /userPermissions/{userId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Rules for helpdesk ticket documents.
     * @path /helpdeskTickets/{ticketId}
     */
    match /helpdeskTickets/{ticketId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Rules for inventory item documents.
     * @path /inventory/{itemId}
     */
    match /inventory/{itemId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Rules for purchase request documents in the supply chain.
     * @path /purchaseRequestsSC/{prId}
     */
    match /purchaseRequestsSC/{prId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Rules for shipment documents.
     * @path /shipments/{shipmentId}
     */
    match /shipments/{shipmentId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Rules for asset documents.
     * @path /assets/{assetId}
     */
    match /assets/{assetId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Rules for maintenance task documents.
     * @path /maintenanceTasks/{taskId}
     */
    match /maintenanceTasks/{taskId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

        /**
     * @description Rules for General Ledger Entry documents.
     * @path /generalLedger/{entryId}
     */
    match /generalLedger/{entryId} {
        allow get, list: if true;
        allow create, update, delete: if false;
    }

    /**
     * @description Rules for Invoice documents.
     * @path /invoices/{invoiceId}
     */
    match /invoices/{invoiceId} {
        allow get, list: if true;
        allow create, update, delete: if false;
    }

    /**
     * @description Rules for Bill documents.
     * @path /bills/{billId}
     */
    match /bills/{billId} {
        allow get, list: if true;
        allow create, update, delete: if false;
    }

    /**
     * @description Rules for Bank Account documents.
     * @path /bankAccounts/{accountId}
     */
    match /bankAccounts/{accountId} {
        allow get, list: if true;
        allow create, update, delete: if false;
    }

        /**
     * @description Rules for Produksi documents.
     * @path /produksi/{produksiId}
     */
    match /produksi/{produksiId} {
        allow get, list: if true;
        allow create, update, delete: if false;
    }

        /**
     * @description Rules for Geologi documents.
     * @path /geologi/{geologiId}
     */
    match /geologi/{geologiId} {
        allow get, list: if true;
        allow create, update, delete: if false;
    }

    /**
     * @description Rules for Pengolahan documents.
     * @path /pengolahan/{pengolahanId}
     */
    match /pengolahan/{pengolahanId} {
        allow get, list: if true;
        allow create, update, delete: if false;
    }

    /**
     * @description Rules for K3L documents.
     * @path /k3l/{k3lId}
     */
    match /k3l/{k3lId} {
        allow get, list: if true;
        allow create, update, delete: if false;
    }

    /**
     * @description Rules for Keuangan documents.
     * @path /keuangan/{keuanganId}
     */
    match /keuangan/{keuanganId} {
        allow get, list: if true;
        allow create, update, delete: if false;
    }

    /**
     * @description Rules for SDM documents.
     * @path /sdm/{sdmId}
     */
    match /sdm/{sdmId} {
        allow get, list: if true;
        allow create, update, delete: if false;
    }

    /**
     * @description Rules for IT documents.
     * @path /it/{itId}
     */
    match /it/{itId} {
        allow get, list: if true;
        allow create, update, delete: if false;
    }
  }
}